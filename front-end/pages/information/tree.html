<!DOCTYPE html>
<html>
<head>
<title>Sub Admin Information</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<style>
  /* Add any custom CSS styles here */
</style>
</head>
<body>
<div class="container mt-4">
  <table class="table table-bordered table-hover" id="subAdminTable">
    <thead class="table-primary">
      <tr>
        <th>Prenom</th>
        <th>Nom</th>
        <th>Email</th>
        <th>Téléphone</th>
        <th>Ville</th>
        <th>Pays</th>
        <th>Genre</th>
        <th>RIB</th>
        <th>Nom de la Banque</th>
        <th>Nombre d'utilisateurs</th>
        <th>Quantité</th>
        <th>Argent payé</th>
        <th>Points mensuels</th>
        <th>Points totaux</th>
      </tr>
    </thead>
    <tbody>
      </tbody>
  </table>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
  $(document).ready(function() {
    $.ajax({
      url: 'tree_back_end.php', // Replace with the actual path to your PHP script
      type: 'GET',
      dataType: 'json',
      success: function(data) {
        let tbody = $('#subAdminTable tbody');
        $.each(data, function(index, row) {
          let newRow = $('<tr>');
          newRow.append('<td>' + row.prenom + '</td>');
          newRow.append('<td>' + row.nom + '</td>');
          newRow.append('<td>' + row.email + '</td>');
          newRow.append('<td>' + row.tele + '</td>');
          newRow.append('<td>' + row.city + '</td>');
          newRow.append('<td>' + row.country + '</td>');
          newRow.append('<td>' + row.gender + '</td>');
          newRow.append('<td>' + row.RIB + '</td>');
          newRow.append('<td>' + row.bank_name + '</td>');
          newRow.append('<td>' + row.user_count + '</td>');
          // Add columns for quantity, money_paid, monthly_points, all_time_points here.  You'll need to fetch this data separately from another table and join it appropriately in your SQL query.  Example below assumes you have a separate table named 'additional_info' with a foreign key linking to sub_admin_info's id.

          //Example (replace with your actual query and table names):
          newRow.append('<td>' +  // Add your logic here to get quantity from your second table.  For example, using another AJAX call or pre-fetching data.
                        '</td>');
          newRow.append('<td>' +  // Add your logic here to get money_paid from your second table.
                        '</td>');
          newRow.append('<td>' +  // Add your logic here to get monthly_points from your second table.
                        '</td>');
          newRow.append('<td>' +  // Add your logic here to get all_time_points from your second table.
                        '</td>');

          tbody.append(newRow);
        });
      },
      error: function(error) {
        console.error("Error fetching data:", error);
      }
    });
  });
</script>
</body>
</html>
